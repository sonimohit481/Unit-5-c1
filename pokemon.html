<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <style>
      body {
        margin: 0;
      }
      h1 {
        text-align: center;
        font-size: 20px;
        font-weight: 700;
      }
      #main {
        width: 40%;
        margin: auto;
      }
      #main table {
        width: 30%;
        margin: auto;
      }
      table,
      th,
      td {
        border: 2px solid rgb(8, 7, 7);
        border-radius: 2px;
        text-align: center;
      }

      #part {
        border: 3px sild black;
        background-color: black;
        width: 100%;
        margin: 20px 0px;
        height: 2px;
      }

      #form {
        width: 30%;
        margin: auto;
      }

      #myform {
        width: 30%;
        margin: auto;
      }
      #myform input {
        width: 100%;
        margin: auto;
        padding: 5px 10px;
        margin: 5px;
      }
      #container {
        border: 1px solid red;
        width: 50%;
        margin: auto;
      }
    </style>
  </head>
  <body>
    <div id="main">
      <h1>Part one</h1>
      <table>
        <thead>
          <tr>
            <th>Pokemon NAmes</th>
          </tr>
        </thead>
        <tbody></tbody>
      </table>
    </div>
    <div id="part"></div>
    <div id="second">
      <div id="form">
        <h1>Part Two</h1>
        <form id="myform">
          <input type="text" id="pname" />
          <input type="submit" value="Search" />
        </form>
      </div>
      <div id="container"></div>
    </div>
  </body>
  <script>
    var pokemon_name;
    if (localStorage.getItem("pokemonname") == null) {
      var url = "https://pokeapi.co/api/v2/pokemon/";
      async function pokemon() {
        var res = await fetch(url);

        var data = await res.json();

        pokemon_name = data.results;

        localStorage.setItem("pokemonname", JSON.stringify(pokemon_name));
      }
      //   console.log("asdfasdgsdfgdf");

      pokemon();
      //   display();
    } else {
      pokemon_name = JSON.parse(localStorage.getItem("pokemonname"));
      //   console.log("localll");
    }
    display();
    // console.log(pokemon_name)

    function display() {
      // event.preventDefault();

      pokemon_name.forEach((ele) => {
        var td = document.createElement("td");
        td.innerText = ele.name;

        var tr = document.createElement("tr");
        tr.appendChild(td);
        // console.log(tr.innerText);

        document.querySelector("tbody").append(tr);
      });
    }

    // -------------------------------------------------------------
    // seciond part

    document.querySelector("#myform").addEventListener("submit", search);

    function search(event) {
      event.preventDefault();
      var name = document.querySelector("#pname").value;

      pokemon_name.forEach((ele) => {
        if (name == ele.name) {
          var name_url = ele.url;
          async function pokemon2() {
            var A = await fetch(name_url);

            var data = await A.json();

            display2(data);
            // console.log(data);
          }
          pokemon2();
        } else {
          alert("Wront pkemon");
        }
      });

      // console.log(name)
    }

    function display2(arr) {
      // console.log(arr.id)
      var div = document.createElement("div");
      var id = document.createElement("p");
      id.innerText = "id: " + arr.id;
      var name = document.createElement("p");
      name.innerText = "Name: " + arr.name;
      var height = document.createElement("p");
      height.innerText = "Height: " + arr.height;
      var weight = document.createElement("p");
      weight.innerText = "Weight: " + arr.weight;
      var abilities = document.createElement("p");
      abilities.innerText = "abilities: " + arr.abilities;
      var moves = document.createElement("p");
      moves.innerText = "moves: " + arr.moves;

      div.append(id, name, height, weight, abilities, moves);

      document.querySelector("#container").append(div);
    }
  </script>
</html>
